if (self.CavalryLogger) { CavalryLogger.start_js(["z93T9"]); }

__d("UFIThreadedFacecastCommentContainer.react",["FluxContainer","React","SubscriptionsHandler","UFICentralUpdates","UFIComment.react","UFIComments","UFIFeedbackTargets","UFILocallyComposedCommentStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(h,b("React").PureComponent);g&&g.prototype;h.getStores=function(){return[b("UFILocallyComposedCommentStore")]};h.calculateState=function(a,c){a=b("UFIComments").getComment(c.commentID);var d=b("UFIFeedbackTargets").getFeedbackTargetIfExists(c.contextArgs.ftentidentifier);c=b("UFILocallyComposedCommentStore").getStateForInstance(c.contextArgs.instanceid);return{comment:a,postFeedback:d,localCommentIDs:c}};h.prototype.componentDidMount=function(){this.setupSubscriptions()};h.prototype.componentDidUpdate=function(){this.setupSubscriptions()};h.prototype.componentWillUnmount=function(){this.closeSubscriptions()};h.prototype.setupSubscriptions=function(){this.closeSubscriptions(),this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("UFICentralUpdates").subscribe("comments-updated",function(a){return this.setState(function(a,b){return h.calculateState(a,b)})}.bind(this)),b("UFICentralUpdates").subscribe("feedback-updated",function(a){return this.setState(function(a,b){return h.calculateState(a,b)})}.bind(this)))};h.prototype.closeSubscriptions=function(){var a=this.$1;if(a==null)return;a.release();this.$1=null};h.prototype.render=function(){var a=this.state.comment,c=this.state.postFeedback;if(a==null||c==null)return b("React").createElement("div",null);var d=c.actorforpost===a.author,e=a.__typename==="local",f=e||this.state.localCommentIDs[a.id],g=c.showremovemenu||c.viewerid===a.author,h=c.canremoveall&&c.isownerpage&&!d&&!c.grouporeventid,i=!0;return b("React").createElement(b("UFIComment.react"),{key:b("UFIComments").getRenderKey(a.id),comment:a,authorProfiles:this.props.authorProfiles,viewerIsAuthor:d,feedback:c,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:h,isLocallyComposed:f,isOptimisticallyRendered:e,parentCanComment:i,showPermalink:!1,showRemoveReportMenu:g,showTranslation:!!a.translationdata})};function h(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(h,{withProps:!0})}),null);