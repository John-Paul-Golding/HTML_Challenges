if (self.CavalryLogger) { CavalryLogger.start_js(["ba9Fc"]); }

__d("UFIThreadedFacecastCommentsContainer.react",["FacecastCommentReplyCreate","FluxContainer","React","UFIComments","UFISharedDispatcher","UFIStoryAction","UFISubscriptionUpdates","UFIThreadedFacecastComments.react","UFIThreadedFacecastCommentsStore","idx","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("UFIThreadedFacecastCommentsStore")]};a.calculateState=function(a,c){a=b("UFIThreadedFacecastCommentsStore").getCommentID(c.contextArgs.instanceid);c=b("UFIThreadedFacecastCommentsStore").getReplyCommentIDs(c.contextArgs.instanceid);return{currentThreadedFacecastCommentID:a,currentReplyIDs:c}};a.prototype.componentDidMount=function(){this.subscribeToRepliesIfNeeded()};a.prototype.componentDidUpdate=function(){this.unsubscribeFromRepliesIfNeeded(),this.subscribeToRepliesIfNeeded()};a.prototype.componentWillUnmount=function(){this.unsubscribeFromRepliesIfNeeded()};a.prototype.subscribeToRepliesIfNeeded=function(){__p&&__p();var a=this.state.currentThreadedFacecastCommentID;if(a==null)return;a=b("UFIComments").getComment(a);if(!a)return;var c=Date.now();this.$1=b("FacecastCommentReplyCreate").subscribe(a.fbid,function(a){b("UFISubscriptionUpdates").handleLiveStreamingReply(this.props.contextArgs.ftentidentifier,a.facecast_comment_reply_create_subscribe,Date.now()-c);b("UFISharedDispatcher").dispatch(b("UFIStoryAction").addFacecastReply(this.props.contextArgs,b("nullthrows")((a=a)!=null?(a=a.facecast_comment_reply_create_subscribe)!=null?(a=a.comment)!=null?a.legacy_token:a:a:a)))}.bind(this))};a.prototype.unsubscribeFromRepliesIfNeeded=function(){var a=this.$1;a&&a.unsubscribe();this.$1=null};a.prototype.render=function(){var a=this.state.currentThreadedFacecastCommentID;return a==null?b("React").createElement("div",null):b("React").createElement(b("UFIThreadedFacecastComments.react"),{authorProfiles:this.props.authorProfiles,contextArgs:this.props.contextArgs,currentThreadedFacecastCommentID:a,currentReplyIDs:this.state.currentReplyIDs})};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);