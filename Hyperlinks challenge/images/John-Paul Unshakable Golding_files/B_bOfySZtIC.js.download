if (self.CavalryLogger) { CavalryLogger.start_js(["M\/A1f"]); }

__d("MercuryStageFilePreviewReactComponent",["MercuryStageFilePreviewReact.bs"],(function(a,b,c,d,e,f){a=b("MercuryStageFilePreviewReact.bs").jsComponent;e.exports=a}),null);
__d("ReactComposerFunFactSinglePromptTaggerContainer.react",["cx","Arbiter","AsyncRequest","CurrentUser","FacebookAppIDs","FlexLayout.react","FluxContainer","ProfileEngagementTypedLogger","ProfileFunFactsEntryPoint","React","ReactComposerAttachmentStore","ReactComposerContextTypes","ReactComposerEvents","ReactComposerFormattedTextActions","ReactComposerFormattedTextStore","ReactComposerFunFactTaggerComponent.react","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerHideOnEscapeKeyPress.react","ReactComposerTaggerStore","ReactComposerTaggerType","XProfileFunFactsSinglePromptFetchController","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=-1,j=0;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.$5=function(){b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,b("ReactComposerLoggingName").FUN_FACT,b("ReactComposerTaggerType").FUN_FACT,null)}.bind(this),c}a.getStores=function(){return[b("ReactComposerAttachmentStore"),b("ReactComposerTaggerStore")]};a.calculateState=function(a,c,d){d=d.composerID;c=!!c.pinnedAskedPromptID||!!c.pinnedPromptID;return{isAttached:b("ReactComposerTaggerStore").hasData(d,b("ReactComposerTaggerType").FUN_FACT),isDisabled:b("ReactComposerTaggerStore").isDisabled(d,b("ReactComposerTaggerType").FUN_FACT),isLoading:a?a.isLoading:c,taggerData:b("ReactComposerTaggerStore").getTaggerData(d,b("ReactComposerTaggerType").FUN_FACT)}};a.prototype.componentDidMount=function(){b("Arbiter").inform("ReactComposerDialogLauncher/expandcomposer/"+this.context.composerID),(this.props.pinnedAskedPromptID||this.props.pinnedPromptID)&&this.$2()};a.prototype.componentDidUpdate=function(a,c){__p&&__p();if(!this.state.isAttached){this.$1&&this.$1.unsubscribe();return}var d;a=null;this.state.taggerData.promptID?(d=this.state.taggerData.promptID,a="answer_post"):(d=this.state.taggerData.askedPromptID,a="ask_post");if(c.isAttached){c=c.taggerData.promptID||c.taggerData.askedPromptID;if(c===d)return}this.$3("enter",a,d,this.state.taggerData.entryPoint||this.props.entryPoint);this.$1&&this.$1.unsubscribe();this.$1=b("Arbiter").subscribeOnce(b("ReactComposerEvents").POST_STARTED+this.context.composerID,function(){if(this.state.isAttached){var a=this.state.taggerData;this.$3("create",a.promptID?"answer_post":"ask_post",a.promptID||a.askedPromptID,a.entryPoint||this.props.entryPoint)}}.bind(this));this.$4(a==="answer_post")};a.prototype.$4=function(a){if(b("ReactComposerTaggerStore").isDisabled(this.context.composerID,b("ReactComposerTaggerType").FORMATTED_TEXT))return;if(a){a=b("ReactComposerFormattedTextStore").getSelectedIndex(this.context.composerID);a===i&&b("ReactComposerFormattedTextActions").setSelectedIndex(this.context.composerID,j)}else b("ReactComposerFormattedTextActions").setSelectedIndex(this.context.composerID,i)};a.prototype.$3=function(a,c,d,e){e=new(b("ProfileEngagementTypedLogger"))().setProductBucket("fun_facts").setProfileIDDummy(b("CurrentUser").getID()).setSurface("unknown").setEngagementType(a).setEventMetadata({entry_point:e,prompt_id:d}).setAppID(b("FacebookAppIDs").WWW);a==="create"?e.setItemType(c).log():a==="enter"&&e.setItemType("composer_page").setItemSubtype(c).log()};a.prototype.$2=function(){var a=this.props.pinnedPromptID?{promptID:this.props.pinnedPromptID}:{askedPromptID:this.props.pinnedAskedPromptID};b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,b("ReactComposerLoggingName").FUN_FACT,b("ReactComposerTaggerType").FUN_FACT,a);a=b("XProfileFunFactsSinglePromptFetchController").getURIBuilder().setInt("fetch_amount",1).setFBID("pinned_prompt_id",this.props.pinnedAskedPromptID||this.props.pinnedPromptID).getURI();new(b("AsyncRequest"))(a).setHandler(function(a){var c=this.state.taggerData;c.prompt=a.getPayload().prompts[0];b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,b("ReactComposerLoggingName").FUN_FACT,b("ReactComposerTaggerType").FUN_FACT,c);this.setState({isLoading:!1});this.$4(!this.props.pinnedAskedPromptID)}.bind(this)).send()};a.prototype.render=function(){if(!this.state.isAttached||this.state.isDisabled)return null;if(this.state.isLoading)return b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_2ph_",direction:"vertical"},b("React").createElement(b("XUISpinner.react"),null));var a=this.state.taggerData.prompt;return b("React").createElement(b("ReactComposerTaggerHideOnEscapeKeyPress.react"),null,b("React").createElement(b("ReactComposerFunFactTaggerComponent.react"),{attribution:a.isCrowdsourced?a.attribution:null,emoji:a.emoji,onClose:this.$5,showCloseButton:!0,title:a.title}))};a.defaultProps={entryPoint:b("ProfileFunFactsEntryPoint").UNKNOWN};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);